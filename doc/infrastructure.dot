digraph{
  graph [fontname = "monospace", fontsize="10", color="grey", fontcolor="grey"];
  node [fontname = "monospace", shape="box", style="filled"];
  edge [fontname = "monospace", color="blue", fontcolor="blue",fontsize="10"];

  subgraph clusterKoodipohja {
    label="eHOKS Backend Koodipohja"
    "virkailija-ns"
    "oppija-ns"
    "tyopaikan-toimija-ns"
    "hoks-api-ns"
  }

  subgraph clusterVirkailijaApi {
    label="/ehoks-virkailija-backend/"
    "virkailija-api"
    "virkailija-ns"
    "hoks-api"
  }

  subgraph clusterJulkinenApi {
    label="/ehoks-oppija-backend/"
    "oppija-api"
    "tyopaikan-toimija-api"
  }

  subgraph clusterEhoksUI {
   label="eHOKS käyttöliittymät"
   "ehoks-ui"
   "ehoks-virkailija-ui"
   "ehoks-tyopaikan-toimija-ui"
  }

  "virkailija-ns" -> "virkailija-api"
  "oppija-ns" -> "oppija-api"
  "tyopaikan-toimija-ns" -> "tyopaikan-toimija-api"
  "hoks-api-ns" -> "hoks-api"


  "hoks-api" -> "ohj-järjestelmät"
  "ohj-järjestelmät" -> "hoks-api"
  "oppija-api" -> "ehoks-ui"
  "ehoks-ui" -> "oppija-api"
  "virkailija-api" -> "ehoks-virkailija-ui"
  "ehoks-virkailija-ui" -> "virkailija-api"
  "tyopaikan-toimija-api" -> "ehoks-tyopaikan-toimija-ui"
  "ehoks-tyopaikan-toimija-ui" -> "tyopaikan-toimija-api"
/*
  "user" -> "app"
  "app" -> "provider-backend"
  "provider-backend" -> "public-api"[label="x-auth-token=API_KEY"]
  "public-api" -> "state-service" [label=" get thing\nlocation"]
  "public-api" -> "resource-service" [label=" get user,"]
  "resource-service" -> "RDS" [dir="both", label="read/write\nnon-transient\nresources"]
  "koodipohja" -> "admin-gui"[label="manage users"]
  "koodipohja" -> "provider-developer"[label="issue api key"]
  "admin-gui" -> "admin-api"
  "admin-api" -> "resource-service"[label="add users"]
  "IOT Gateway" -> "Kinesis"
  "Kinesis" -> "DynamoDB" [label="upsert \nthing state"]
  "state-service" -> "DynamoDB" [label="read \nthing state"]
  "thing" -> "IOT Gateway" [ label="thing\ntelematics\nstream" ]
*/
}